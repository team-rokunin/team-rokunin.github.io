"use strict";(self.webpackChunkwebkunin=self.webpackChunkwebkunin||[]).push([[824],{1273:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ portfolio_page)\n});\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(7294);\n// EXTERNAL MODULE: ./node_modules/@mui/base/Portal/Portal.js\nvar Portal = __webpack_require__(8385);\n// EXTERNAL MODULE: ./src/client/components/common/grain-background.tsx\nvar grain_background = __webpack_require__(5967);\n// EXTERNAL MODULE: ./src/client/components/common/light-foreground.tsx\nvar light_foreground = __webpack_require__(3597);\n// EXTERNAL MODULE: ./src/client/components/common/lined-foreground.tsx\nvar lined_foreground = __webpack_require__(629);\n// EXTERNAL MODULE: ./src/client/components/common/navigation-bar.tsx + 6 modules\nvar navigation_bar = __webpack_require__(7553);\n// EXTERNAL MODULE: ./src/client/components/landing-page/footer-section.tsx\nvar footer_section = __webpack_require__(7865);\n// EXTERNAL MODULE: ./src/client/components/landing-page/contact-section.tsx\nvar contact_section = __webpack_require__(5755);\n// EXTERNAL MODULE: ./node_modules/react-swipeable-views/lib/index.js\nvar lib = __webpack_require__(7314);\n// EXTERNAL MODULE: ./node_modules/react-swipeable-views-utils/lib/index.js\nvar react_swipeable_views_utils_lib = __webpack_require__(2850);\n// EXTERNAL MODULE: ./node_modules/@mui/joy/styles/ThemeProvider.js\nvar ThemeProvider = __webpack_require__(8629);\n// EXTERNAL MODULE: ./node_modules/@mui/joy/Box/Box.js + 1 modules\nvar Box = __webpack_require__(2706);\n// EXTERNAL MODULE: ./node_modules/@mui/joy/Typography/Typography.js + 1 modules\nvar Typography = __webpack_require__(1219);\n// EXTERNAL MODULE: ./src/client/store/screen.tsx\nvar screen = __webpack_require__(5231);\n// EXTERNAL MODULE: ./src/client/store/portfolio.tsx + 2 modules\nvar portfolio = __webpack_require__(9358);\n// EXTERNAL MODULE: ./src/client/components/common/hook.ts\nvar hook = __webpack_require__(3007);\n// EXTERNAL MODULE: ./src/client/components/common/color.ts\nvar color = __webpack_require__(3322);\n// EXTERNAL MODULE: ./src/client/components/common/header-text.tsx\nvar header_text = __webpack_require__(8665);\n// EXTERNAL MODULE: ./src/client/components/common/lightbox.tsx\nvar lightbox = __webpack_require__(1202);\n// EXTERNAL MODULE: ./src/client/components/landing-page/portfolio-section.tsx\nvar portfolio_section = __webpack_require__(9651);\n;// CONCATENATED MODULE: ./src/client/components/portfolio-page/portfolio-section.tsx\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst VirtualizeSwipeableViews = (0,react_swipeable_views_utils_lib/* virtualize */.p6)(lib/* default */.ZP);\nconst PortfolioSection = (props) => {\n    const [{ type: screenType }] = (0,screen/* useScreenState */.j)();\n    const [{ videos }] = (0,portfolio/* usePortfolioState */.h)();\n    const [state, setState] = react.useState({\n        playing: [],\n        videoAnchors: {},\n        currentPage: 0,\n    });\n    const [containerRef] = (0,hook/* useRefCallback */.C)((node) => {\n        if (props.onResize && node) {\n            const onResize = props.onResize;\n            onResize(node.getBoundingClientRect());\n            const resizeObserver = new ResizeObserver(() => {\n                onResize(node.getBoundingClientRect());\n            });\n            resizeObserver.observe(node);\n            return () => resizeObserver.disconnect();\n        }\n    });\n    const playingVideoRef = react.useRef(null);\n    const videosLength = ['xs-phone'].includes(screenType) ? 2 : 4;\n    react.useEffect(() => {\n        if (state.playing.length !== videosLength) {\n            const playing = Array(videosLength)\n                .fill(undefined)\n                .map(() => (Math.random() > 0.25 ? true : false));\n            if (playing.every((playing) => !playing)) {\n                playing[Math.floor(Math.random() * videosLength)] = true;\n            }\n            setState((state) => (Object.assign(Object.assign({}, state), { playing })));\n            setTimeout(playAll, 1000);\n        }\n        startRandomlyPause();\n    }, []);\n    const randomlyPause = () => {\n        setState((state) => {\n            const playing = [...state.playing];\n            const index = Math.floor(Math.random() * videosLength);\n            playing[index] = !playing[index];\n            return !playing.every((playing) => !playing) && Math.random() > 0.5\n                ? Object.assign(Object.assign({}, state), { playing }) : state;\n        });\n        setTimeout(playAll, 1000);\n        startRandomlyPause();\n    };\n    const playAll = () => setState((state) => (Object.assign(Object.assign({}, state), { playing: state.playing.map(() => true) })));\n    const startRandomlyPause = () => setTimeout(randomlyPause, Math.round(Math.random() * 3 + 6) * 1000);\n    const videoAnchors = react.useRef({});\n    const setVideoRef = react.useCallback((link, node) => {\n        if (node) {\n            videoAnchors.current = Object.assign(Object.assign({}, videoAnchors.current), { [link]: node });\n        }\n    }, []);\n    const onChangePage = (index) => {\n        setState((state) => (Object.assign(Object.assign({}, state), { currentPage: index })));\n    };\n    const openVideoModal = (link) => {\n        setState((state) => (Object.assign(Object.assign({}, state), { modal: { type: 'video', link } })));\n        setTimeout(() => {\n            var _a;\n            (_a = playingVideoRef.current) === null || _a === void 0 ? void 0 : _a.play();\n        }, 480);\n    };\n    const onCloseVideoModal = () => {\n        var _a;\n        (_a = playingVideoRef.current) === null || _a === void 0 ? void 0 : _a.pause();\n        onCloseModal();\n    };\n    const onCloseModal = () => setState((state) => (Object.assign(Object.assign({}, state), { modal: undefined })));\n    const theme = (0,ThemeProvider/* useTheme */.F)();\n    const { playing, currentPage, modal } = state;\n    const buttonStyle = {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '36px',\n        height: '36px',\n        backgroundColor: 'transparent',\n    };\n    const navigationButton = (label, nextPage) => (react.createElement(Box/* default */.Z, { component: \"button\", onClick: typeof nextPage === 'number' ? () => onChangePage(nextPage) : undefined, sx: Object.assign(Object.assign({}, buttonStyle), { cursor: typeof nextPage === 'number' ? 'pointer' : 'default', border: `1.5px solid ${typeof nextPage === 'number'\n                ? theme.palette.text.primary.replace(...(0,color/* replaceRGBAlpha */.M)(0.4))\n                : theme.palette.text.primary.replace(...(0,color/* replaceRGBAlpha */.M)(0.2))}`, boxShadow: `inset 0 0 16px ${typeof nextPage === 'number' ? theme.palette.text.primary.replace(...(0,color/* replaceRGBAlpha */.M)(0.1)) : 'transparent'}`, transition: ['border', 'box-shadow'].map((property) => `${property} 160ms ease-in-out`).join(','), ['& > span']: {\n                transition: 'color 160ms ease-in-out',\n                color: typeof nextPage === 'number'\n                    ? theme.palette.text.primary\n                    : theme.palette.text.primary.replace(...(0,color/* replaceRGBAlpha */.M)(0.5)),\n            } }) },\n        react.createElement(Typography/* default */.C, { component: \"span\", level: \"body1\", sx: { fontSize: '12px' } }, label)));\n    const pagesLength = Math.ceil(videos.length / videosLength);\n    return (react.createElement(react.Fragment, null,\n        react.createElement(Box/* default */.Z, { ref: containerRef, sx: {\n                width: '100%',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                alignItems: 'center',\n                padding: ['xs-phone', 'sm-tablet'].includes(screenType) ? '46px 0' : '64px 192px',\n            } },\n            react.createElement(Box/* default */.Z, { sx: { padding: ['xs-phone', 'sm-tablet'].includes(screenType) ? '0 22px' : '0' } },\n                react.createElement(header_text/* default */.Z, { text: \"WE ARE ROKUNIN\" })),\n            react.createElement(Typography/* default */.C, { level: \"h4\", sx: {\n                    color: theme.palette.text.secondary,\n                    padding: ['xs-phone', 'sm-tablet'].includes(screenType) ? '0 46px' : '0',\n                    margin: '64px auto',\n                    maxWidth: '952px',\n                    textAlign: 'center',\n                } }, \"PERSISTANCE IS OUR GUIDE\"),\n            react.createElement(Typography/* default */.C, { level: \"body1\", sx: {\n                    color: theme.palette.text.secondary,\n                    padding: ['xs-phone', 'sm-tablet'].includes(screenType) ? '0 46px' : '0',\n                    margin: '64px auto',\n                    maxWidth: '952px',\n                    textAlign: 'center',\n                } }, \"We are an experienced game animation team based in Malaysia and have worked with various successful studios. Our team of animators and artists consists of highly talented people who are well-versed in their respective fields, capable of providing quality service and ensure your game stand out visually.\"),\n            react.createElement(VirtualizeSwipeableViews, { index: currentPage, onChangeIndex: onChangePage, slideCount: pagesLength, slideRenderer: ({ index, key }) => {\n                    const pageVideos = videos.slice(index * videosLength, (index + 1) * videosLength);\n                    return (react.createElement(Box/* default */.Z, { key: key, sx: {\n                            display: 'grid',\n                            gridTemplateColumns: ['xs-phone'].includes(screenType) ? '1fr' : 'repeat(2, 1fr)',\n                            gap: '64px',\n                            padding: ['xs-phone', 'sm-tablet'].includes(screenType) ? '0 46px' : '0 32px',\n                        } }, pageVideos.map((demo, index) => (react.createElement(Box/* default */.Z, { key: demo.title, onClick: () => openVideoModal(demo.video) },\n                        react.createElement(portfolio_section/* VideoDemo */.T, { ref: (video) => setVideoRef(demo.video, video), title: demo.title, video: demo.thumbnail, playState: playing[index] ? 'playing' : 'paused' }))))));\n                }, style: {\n                    maxWidth: '1016px',\n                    margin: '96px auto 16px',\n                } }),\n            react.createElement(Box/* default */.Z, { sx: {\n                    display: 'flex',\n                    justifyContent: 'center',\n                    margin: '64px',\n                    columnGap: '16px',\n                } },\n                navigationButton('<', currentPage > 0 ? currentPage - 1 : undefined),\n                Array(pagesLength)\n                    .fill(undefined)\n                    .map((_, index) => (react.createElement(Box/* default */.Z, { component: \"button\", key: index, onClick: () => onChangePage(index), sx: Object.assign(Object.assign({}, buttonStyle), { cursor: 'pointer', border: `1.5px solid ${index === currentPage\n                            ? theme.palette.primary[400].replace(...(0,color/* replaceRGBAlpha */.M)(0.6))\n                            : theme.palette.text.primary.replace(...(0,color/* replaceRGBAlpha */.M)(0.4))}`, boxShadow: `inset 0 0 16px ${index === currentPage\n                            ? theme.palette.primary[400].replace(...(0,color/* replaceRGBAlpha */.M)(0.2))\n                            : theme.palette.text.primary.replace(...(0,color/* replaceRGBAlpha */.M)(0.1))}`, transition: ['border', 'box-shadow'].map((property) => `${property} 160ms ease-in-out`).join(','), ['& > span']: {\n                            transition: 'color 160ms ease-in-out',\n                            color: index === currentPage ? theme.palette.text.secondary : theme.palette.text.primary,\n                        } }) },\n                    react.createElement(Typography/* default */.C, { component: \"span\", level: \"body1\", sx: { fontSize: '12px' } }, index + 1)))),\n                navigationButton('>', currentPage < Math.ceil(videos.length / videosLength) - 1 ? currentPage + 1 : undefined))),\n        react.createElement(lightbox/* default */.Z, { open: (modal === null || modal === void 0 ? void 0 : modal.type) === 'video', onClose: onCloseVideoModal, anchor: (modal === null || modal === void 0 ? void 0 : modal.type) === 'video' ? videoAnchors.current[modal.link] : undefined }, (modal === null || modal === void 0 ? void 0 : modal.type) === 'video' ? (react.createElement(Box/* default */.Z, { component: \"video\", ref: playingVideoRef, controls: true, playsInline: true, sx: {\n                position: 'absolute',\n                width: '100%',\n                height: '100%',\n                objectFit: 'cover',\n                outline: 'none',\n            } },\n            react.createElement(\"source\", { src: modal.link, type: \"video/mp4\" }))) : undefined)));\n};\n/* harmony default export */ const portfolio_page_portfolio_section = (PortfolioSection);\n\n;// CONCATENATED MODULE: ./src/client/components/portfolio-page/index.tsx\n\n\n\n\n\n\n\n\n\nconst PortfolioPage = () => {\n    var _a, _b, _c, _d;\n    const [state, setState] = react.useState({\n        dimensions: {},\n        activeSection: 'portfolio',\n    });\n    const { dimensions } = state;\n    const sections = ['portfolio', 'contact'];\n    const heights = [(_b = (_a = dimensions.portfolio) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : 0, (_d = (_c = dimensions.contact) === null || _c === void 0 ? void 0 : _c.height) !== null && _d !== void 0 ? _d : 0];\n    react.useEffect(() => {\n        const onScroll = () => {\n            const { activeSection } = state;\n            for (const index of [0, 1, 2, 3]) {\n                const height = heights.slice(0, index + 1).reduce((total, next) => total + next, 0) - heights[index] / 2;\n                if (window.scrollY <= height) {\n                    const section = sections[index];\n                    if (activeSection !== section) {\n                        setState((state) => (Object.assign(Object.assign({}, state), { activeSection: section })));\n                    }\n                    break;\n                }\n            }\n        };\n        document.addEventListener('scroll', onScroll);\n        return () => document.removeEventListener('scroll', onScroll);\n    }, [state.dimensions, state.activeSection]);\n    const setDimension = (section, dimension) => {\n        setState((state) => (Object.assign(Object.assign({}, state), { dimensions: Object.assign(Object.assign({}, state.dimensions), { [section]: dimension }) })));\n    };\n    const onClickSection = (section) => {\n        window.scroll({\n            top: heights.slice(0, sections.indexOf(section)).reduce((total, next) => total + next, 0),\n            behavior: 'smooth',\n        });\n    };\n    const { activeSection } = state;\n    return (react.createElement(react.Fragment, null,\n        react.createElement(grain_background/* default */.Z, null),\n        react.createElement(navigation_bar/* default */.Z, { sections: [\n                {\n                    label: 'PORTFOLIO',\n                    active: activeSection === 'portfolio',\n                    icon: (react.createElement(react.Fragment, null,\n                        react.createElement(\"path\", { d: \"M9.5,1H3.5V19h6v-2h2v-2h2v-2h2v-1h1v-4h-1v-1h-2v-2h-2V3h-2V1Zm2,10v2h-2v2h-2v2h-2V3h2v2h2v2h2v2h2v2h-2Z\" }))),\n                    onClick: () => onClickSection('portfolio'),\n                },\n                {\n                    label: 'CONTACT US',\n                    active: activeSection === 'contact',\n                    icon: (react.createElement(react.Fragment, null,\n                        react.createElement(\"path\", { d: \"M19,2V1H1v1H0V18H1v1H19v-1h1V2h-1Zm-1,3h-1v1h-2v1h-2v1h-2v1h-2v-1h-2v-1h-2v-1H3v-1h-1v-1h1v-1h14v1h1v1Zm0,11h-1v1H3v-1h-1V8h1v1h2v1h2v1h1v1h4v-1h1v-1h2v-1h2v-1h1v8Z\" }))),\n                    onClick: () => onClickSection('contact'),\n                },\n            ] }),\n        react.createElement(portfolio_page_portfolio_section, { onResize: (dimension) => setDimension('portfolio', dimension) }),\n        react.createElement(contact_section/* default */.Z, { onResize: (dimension) => setDimension('contact', dimension) }),\n        react.createElement(footer_section/* default */.Z, null),\n        react.createElement(Portal/* default */.Z, null,\n            react.createElement(light_foreground/* default */.Z, null),\n            react.createElement(lined_foreground/* default */.Z, null))));\n};\n/* harmony default export */ const portfolio_page = (PortfolioPage);\n\n\n//# sourceURL=webpack://webkunin/./src/client/components/portfolio-page/index.tsx_+_1_modules?")}}]);